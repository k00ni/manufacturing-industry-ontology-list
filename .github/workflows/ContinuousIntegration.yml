# This action provides a few helper to ease our paper writing process.
name: Continuous Integration
on: [push]
jobs:
  align_csv_gen_graph_vi:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        php:
          - "8.3"
    steps:
      - name: "Checkout"
        uses: "actions/checkout@v3"

      - name: "Install PHP"
        uses: "shivammathur/setup-php@v2"
        with:
          php-version: "${{ matrix.php }}"
          coverage: "none"
      - name: Install Composer dependencies
        run: cd scripts && composer update --no-progress --prefer-dist --optimize-autoloader
      - name: "Run checks"
        run: "make"

  check_latext_csv:
    runs-on: ubuntu-latest
    steps:
      - name: Set up Git repository
        uses: actions/checkout@v3
      # compiles our tex file to see if there are any problems
      - name: Compile LaTeX document
        uses: xu-cheng/latex-action@v3
        with:
          root_file: paper.tex
      # Linter to validate our CSV file
      - name: Run csv-lint
        uses: blackstar257/docker-csvlint@master
        env:
          ACTION_STATE_NAME: "ontologies.csv"
